- categories = @category.split('.')
- categories.shift
- chain = ['top']
.diagnosis.well
  - if categories.present?
    - categories.each do |category|
      - chain  << category
      %button.btn.btn-primary.btn-chosen.decision-tree{data: {role: 'decision-tree-selector', category: chain.join('.')}}= category.humanize
  - else
    Choose a category

.drug-choices.well
  - @choices.each do |choice|
    - if choice
      - display_choice = choice[0]
      - choice_category = @category.present? ? "#{@category}.#{display_choice}" : display_choice

      - if @leaf
        %button.btn.btn-primary.decision-tree{data: {role: 'drug-selector', 'drug-uuid' => choice.uuid, category: choice_category}}= choice.selection_name

      - else
        %button.btn.btn-primary.decision-tree{data: {role: 'decision-tree-selector', category: choice_category}}= display_choice.humanize

